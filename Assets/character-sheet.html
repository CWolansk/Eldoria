<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D&D 5e Character Stats Sheet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(255,255,255,0.1);
            border: 2px solid #000;
        }

        h1 {
            text-align: center;
            color: #000;
            margin-bottom: 30px;
            font-size: 2em;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 3px solid #000;
            padding-bottom: 15px;
        }

        .character-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #000;
        }

        .info-field {
            display: flex;
            flex-direction: column;
        }

        .info-field label {
            font-size: 0.75em;
            color: #000;
            margin-bottom: 5px;
            text-transform: uppercase;
            font-weight: bold;
        }

        .info-field input, .info-field select {
            padding: 8px;
            border: 2px solid #000;
            border-radius: 5px;
            font-size: 1em;
            background: #fff;
        }

        .info-field input:focus, .info-field select:focus {
            outline: none;
            border-color: #333;
            background: #f5f5f5;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-block {
            background: #000;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            color: #fff;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: 2px solid #000;
        }

        .stat-block label {
            display: block;
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
            font-weight: bold;
        }

        .stat-block input {
            width: 60px;
            padding: 8px;
            text-align: center;
            border: 2px solid #000;
            border-radius: 5px;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            background: #fff;
        }

        .modifier {
            font-size: 1.5em;
            font-weight: bold;
            background: #fff;
            color: #000;
            padding: 10px;
            border-radius: 5px;
            margin-top: 5px;
            border: 2px solid #fff;
        }

        .skills-section {
            margin-bottom: 30px;
        }

        .skills-section h2 {
            color: #000;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #000;
        }

        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 10px;
        }

        .skill-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: #fff;
            border: 1px solid #000;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .skill-item:hover {
            background: #f0f0f0;
        }

        .skill-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            cursor: pointer;
        }

        .skill-item label {
            flex: 1;
            cursor: pointer;
            font-size: 0.95em;
        }

        .skill-bonus {
            font-weight: bold;
            color: #000;
            min-width: 35px;
            text-align: right;
        }

        .saving-throws {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
        }

        .save-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: #fff;
            border: 1px solid #000;
            border-radius: 5px;
        }

        .save-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            cursor: pointer;
        }

        .save-item label {
            flex: 1;
            cursor: pointer;
            font-weight: 600;
        }

        .save-bonus {
            font-weight: bold;
            color: #000;
            min-width: 35px;
            text-align: right;
        }

        .combat-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .combat-stat {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #000;
        }

        .combat-stat label {
            display: block;
            font-size: 0.85em;
            color: #000;
            margin-bottom: 8px;
            text-transform: uppercase;
            font-weight: bold;
        }

        .combat-stat .value {
            font-size: 1.8em;
            font-weight: bold;
            color: #000;
        }

        .reset-btn {
            background: #000;
            color: #fff;
            padding: 12px 30px;
            border: 2px solid #000;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            display: block;
            margin: 20px auto;
            transition: all 0.3s;
        }

        .reset-btn:hover {
            background: #fff;
            color: #000;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>D&D 5e Character Stats</h1>
        
        <!-- Character Basic Info -->
        <div class="character-info">
            <div class="info-field">
                <label>Character Name</label>
                <input type="text" id="charName" placeholder="Enter name">
            </div>
            <div class="info-field">
                <label>Class</label>
                <input type="text" id="charClass" placeholder="Enter class">
            </div>
            <div class="info-field">
                <label>Level</label>
                <input type="number" id="charLevel" value="1" min="1" max="20">
            </div>
            <div class="info-field">
                <label>Race</label>
                <input type="text" id="charRace" placeholder="Enter race">
            </div>
        </div>

        <!-- Ability Scores -->
        <div class="stats-grid">
            <div class="stat-block">
                <label>Strength</label>
                <input type="number" id="str" value="10" min="1" max="30">
                <div class="modifier" id="strMod">+0</div>
            </div>
            <div class="stat-block">
                <label>Dexterity</label>
                <input type="number" id="dex" value="10" min="1" max="30">
                <div class="modifier" id="dexMod">+0</div>
            </div>
            <div class="stat-block">
                <label>Constitution</label>
                <input type="number" id="con" value="10" min="1" max="30">
                <div class="modifier" id="conMod">+0</div>
            </div>
            <div class="stat-block">
                <label>Intelligence</label>
                <input type="number" id="int" value="10" min="1" max="30">
                <div class="modifier" id="intMod">+0</div>
            </div>
            <div class="stat-block">
                <label>Wisdom</label>
                <input type="number" id="wis" value="10" min="1" max="30">
                <div class="modifier" id="wisMod">+0</div>
            </div>
            <div class="stat-block">
                <label>Charisma</label>
                <input type="number" id="cha" value="10" min="1" max="30">
                <div class="modifier" id="chaMod">+0</div>
            </div>
        </div>

        <!-- Combat Stats -->
        <h2 style="color: #000; margin-bottom: 15px; border-bottom: 2px solid #000; padding-bottom: 10px;">Combat Stats</h2>
        <div class="combat-stats">
            <div class="combat-stat">
                <label>Proficiency Bonus</label>
                <div class="value" id="profBonus">+2</div>
            </div>
            <div class="combat-stat">
                <label>Initiative</label>
                <div class="value" id="initiative">+0</div>
            </div>
            <div class="combat-stat">
                <label>Armor Class</label>
                <input type="number" id="ac" value="10" min="1" style="font-size: 1.5em; font-weight: bold; color: #000; border: none; text-align: center; background: transparent; width: 100%;">
            </div>
            <div class="combat-stat">
                <label>Speed</label>
                <input type="number" id="speed" value="30" min="0" style="font-size: 1.5em; font-weight: bold; color: #000; border: none; text-align: center; background: transparent; width: 100%;">
            </div>
        </div>

        <!-- Saving Throws -->
        <h2 style="color: #000; margin-bottom: 15px; border-bottom: 2px solid #000; padding-bottom: 10px;">Saving Throws</h2>
        <div class="saving-throws">
            <div class="save-item">
                <input type="checkbox" id="saveStr">
                <label for="saveStr">Strength</label>
                <span class="save-bonus" id="saveStrBonus">+0</span>
            </div>
            <div class="save-item">
                <input type="checkbox" id="saveDex">
                <label for="saveDex">Dexterity</label>
                <span class="save-bonus" id="saveDexBonus">+0</span>
            </div>
            <div class="save-item">
                <input type="checkbox" id="saveCon">
                <label for="saveCon">Constitution</label>
                <span class="save-bonus" id="saveConBonus">+0</span>
            </div>
            <div class="save-item">
                <input type="checkbox" id="saveInt">
                <label for="saveInt">Intelligence</label>
                <span class="save-bonus" id="saveIntBonus">+0</span>
            </div>
            <div class="save-item">
                <input type="checkbox" id="saveWis">
                <label for="saveWis">Wisdom</label>
                <span class="save-bonus" id="saveWisBonus">+0</span>
            </div>
            <div class="save-item">
                <input type="checkbox" id="saveCha">
                <label for="saveCha">Charisma</label>
                <span class="save-bonus" id="saveChaBonus">+0</span>
            </div>
        </div>

        <!-- Skills -->
        <div class="skills-section">
            <h2>Skills</h2>
            <div class="skills-grid">
                <div class="skill-item">
                    <input type="checkbox" id="acrobatics">
                    <label for="acrobatics">Acrobatics (Dex)</label>
                    <span class="skill-bonus" id="acrobaticsBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="animalHandling">
                    <label for="animalHandling">Animal Handling (Wis)</label>
                    <span class="skill-bonus" id="animalHandlingBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="arcana">
                    <label for="arcana">Arcana (Int)</label>
                    <span class="skill-bonus" id="arcanaBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="athletics">
                    <label for="athletics">Athletics (Str)</label>
                    <span class="skill-bonus" id="athleticsBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="deception">
                    <label for="deception">Deception (Cha)</label>
                    <span class="skill-bonus" id="deceptionBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="history">
                    <label for="history">History (Int)</label>
                    <span class="skill-bonus" id="historyBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="insight">
                    <label for="insight">Insight (Wis)</label>
                    <span class="skill-bonus" id="insightBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="intimidation">
                    <label for="intimidation">Intimidation (Cha)</label>
                    <span class="skill-bonus" id="intimidationBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="investigation">
                    <label for="investigation">Investigation (Int)</label>
                    <span class="skill-bonus" id="investigationBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="medicine">
                    <label for="medicine">Medicine (Wis)</label>
                    <span class="skill-bonus" id="medicineBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="nature">
                    <label for="nature">Nature (Int)</label>
                    <span class="skill-bonus" id="natureBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="perception">
                    <label for="perception">Perception (Wis)</label>
                    <span class="skill-bonus" id="perceptionBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="performance">
                    <label for="performance">Performance (Cha)</label>
                    <span class="skill-bonus" id="performanceBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="persuasion">
                    <label for="persuasion">Persuasion (Cha)</label>
                    <span class="skill-bonus" id="persuasionBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="religion">
                    <label for="religion">Religion (Int)</label>
                    <span class="skill-bonus" id="religionBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="sleightOfHand">
                    <label for="sleightOfHand">Sleight of Hand (Dex)</label>
                    <span class="skill-bonus" id="sleightOfHandBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="stealth">
                    <label for="stealth">Stealth (Dex)</label>
                    <span class="skill-bonus" id="stealthBonus">+0</span>
                </div>
                <div class="skill-item">
                    <input type="checkbox" id="survival">
                    <label for="survival">Survival (Wis)</label>
                    <span class="skill-bonus" id="survivalBonus">+0</span>
                </div>
            </div>
        </div>

        <div style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
            <button class="reset-btn" onclick="exportCharacter()">Export Character Data</button>
            <button class="reset-btn" onclick="resetSheet()">Reset Character Sheet</button>
        </div>
    </div>

    <script>
        // Make CharacterSheet available globally for external initialization
        window.CharacterSheet = window.CharacterSheet || {};

        // Skill to ability mapping
        const skillAbilities = {
            acrobatics: 'dex',
            animalHandling: 'wis',
            arcana: 'int',
            athletics: 'str',
            deception: 'cha',
            history: 'int',
            insight: 'wis',
            intimidation: 'cha',
            investigation: 'int',
            medicine: 'wis',
            nature: 'int',
            perception: 'wis',
            performance: 'cha',
            persuasion: 'cha',
            religion: 'int',
            sleightOfHand: 'dex',
            stealth: 'dex',
            survival: 'wis'
        };

        // Calculate ability modifier
        function calculateModifier(score) {
            return Math.floor((score - 10) / 2);
        }

        // Calculate proficiency bonus based on level
        function calculateProficiencyBonus(level) {
            return Math.ceil(level / 4) + 1;
        }

        // Format bonus for display
        function formatBonus(bonus) {
            return bonus >= 0 ? `+${bonus}` : `${bonus}`;
        }

        // Update all ability modifiers
        function updateAbilityModifiers() {
            const abilities = ['str', 'dex', 'con', 'int', 'wis', 'cha'];
            const modifiers = {};
            
            abilities.forEach(ability => {
                const score = parseInt(document.getElementById(ability).value) || 10;
                const modifier = calculateModifier(score);
                modifiers[ability] = modifier;
                document.getElementById(`${ability}Mod`).textContent = formatBonus(modifier);
            });

            return modifiers;
        }

        // Update proficiency bonus
        function updateProficiencyBonus() {
            const level = parseInt(document.getElementById('charLevel').value) || 1;
            const profBonus = calculateProficiencyBonus(level);
            document.getElementById('profBonus').textContent = formatBonus(profBonus);
            return profBonus;
        }

        // Update initiative
        function updateInitiative() {
            const dexScore = parseInt(document.getElementById('dex').value) || 10;
            const initiative = calculateModifier(dexScore);
            document.getElementById('initiative').textContent = formatBonus(initiative);
        }

        // Update saving throws
        function updateSavingThrows(modifiers, profBonus) {
            const saves = {
                saveStr: 'str',
                saveDex: 'dex',
                saveCon: 'con',
                saveInt: 'int',
                saveWis: 'wis',
                saveCha: 'cha'
            };

            Object.entries(saves).forEach(([saveId, ability]) => {
                const isProficient = document.getElementById(saveId).checked;
                const bonus = modifiers[ability] + (isProficient ? profBonus : 0);
                document.getElementById(`${saveId}Bonus`).textContent = formatBonus(bonus);
            });
        }

        // Update skills
        function updateSkills(modifiers, profBonus) {
            Object.entries(skillAbilities).forEach(([skill, ability]) => {
                const isProficient = document.getElementById(skill).checked;
                const bonus = modifiers[ability] + (isProficient ? profBonus : 0);
                document.getElementById(`${skill}Bonus`).textContent = formatBonus(bonus);
            });
        }

        // Main update function
        function updateCharacterSheet() {
            const modifiers = updateAbilityModifiers();
            const profBonus = updateProficiencyBonus();
            updateInitiative();
            updateSavingThrows(modifiers, profBonus);
            updateSkills(modifiers, profBonus);
            
            // Save to localStorage
            saveCharacter();
        }

        // Save character to localStorage
        function saveCharacter() {
            const characterData = {
                name: document.getElementById('charName').value,
                class: document.getElementById('charClass').value,
                level: document.getElementById('charLevel').value,
                race: document.getElementById('charRace').value,
                str: document.getElementById('str').value,
                dex: document.getElementById('dex').value,
                con: document.getElementById('con').value,
                int: document.getElementById('int').value,
                wis: document.getElementById('wis').value,
                cha: document.getElementById('cha').value,
                ac: document.getElementById('ac').value,
                speed: document.getElementById('speed').value,
                savingThrows: {
                    str: document.getElementById('saveStr').checked,
                    dex: document.getElementById('saveDex').checked,
                    con: document.getElementById('saveCon').checked,
                    int: document.getElementById('saveInt').checked,
                    wis: document.getElementById('saveWis').checked,
                    cha: document.getElementById('saveCha').checked
                },
                skills: {}
            };

            Object.keys(skillAbilities).forEach(skill => {
                characterData.skills[skill] = document.getElementById(skill).checked;
            });

            localStorage.setItem('dndCharacter', JSON.stringify(characterData));
        }

        // Initialize character from data object
        function initializeCharacter(data) {
            if (!data) return;

            // Basic info
            if (data.name) document.getElementById('charName').value = data.name;
            if (data.class) document.getElementById('charClass').value = data.class;
            if (data.level) document.getElementById('charLevel').value = data.level;
            if (data.race) document.getElementById('charRace').value = data.race;

            // Ability scores
            if (data.str) document.getElementById('str').value = data.str;
            if (data.dex) document.getElementById('dex').value = data.dex;
            if (data.con) document.getElementById('con').value = data.con;
            if (data.int) document.getElementById('int').value = data.int;
            if (data.wis) document.getElementById('wis').value = data.wis;
            if (data.cha) document.getElementById('cha').value = data.cha;

            // Combat stats
            if (data.ac) document.getElementById('ac').value = data.ac;
            if (data.speed) document.getElementById('speed').value = data.speed;

            // Clear all checkboxes first
            ['str', 'dex', 'con', 'int', 'wis', 'cha'].forEach(save => {
                document.getElementById(`save${save.charAt(0).toUpperCase() + save.slice(1)}`).checked = false;
            });
            Object.keys(skillAbilities).forEach(skill => {
                document.getElementById(skill).checked = false;
            });

            // Saving throws
            if (data.saves) {
                const saveArray = Array.isArray(data.saves) ? data.saves : data.saves.split(',');
                saveArray.forEach(save => {
                    const saveId = `save${save.trim().charAt(0).toUpperCase() + save.trim().slice(1)}`;
                    const element = document.getElementById(saveId);
                    if (element) element.checked = true;
                });
            }

            // Skills
            if (data.skills) {
                const skillArray = Array.isArray(data.skills) ? data.skills : data.skills.split(',');
                skillArray.forEach(skill => {
                    const element = document.getElementById(skill.trim());
                    if (element) element.checked = true;
                });
            }

            // Update all calculations
            updateCharacterSheet();
        }

        // Expose initialize function globally
        window.CharacterSheet.initialize = initializeCharacter;

        // Load character from localStorage
        function loadCharacter() {
            const saved = localStorage.getItem('dndCharacter');
            if (saved) {
                const data = JSON.parse(saved);
                initializeCharacter(data);
            }
        }

        // Export current character data
        function exportCharacter() {
            const data = {
                name: document.getElementById('charName').value,
                class: document.getElementById('charClass').value,
                level: parseInt(document.getElementById('charLevel').value),
                race: document.getElementById('charRace').value,
                str: parseInt(document.getElementById('str').value),
                dex: parseInt(document.getElementById('dex').value),
                con: parseInt(document.getElementById('con').value),
                int: parseInt(document.getElementById('int').value),
                wis: parseInt(document.getElementById('wis').value),
                cha: parseInt(document.getElementById('cha').value),
                ac: parseInt(document.getElementById('ac').value),
                speed: parseInt(document.getElementById('speed').value),
                saves: [],
                skills: []
            };

            // Get proficient saves
            ['str', 'dex', 'con', 'int', 'wis', 'cha'].forEach(save => {
                if (document.getElementById(`save${save.charAt(0).toUpperCase() + save.slice(1)}`).checked) {
                    data.saves.push(save);
                }
            });

            // Get proficient skills
            Object.keys(skillAbilities).forEach(skill => {
                if (document.getElementById(skill).checked) {
                    data.skills.push(skill);
                }
            });

            const jsonString = JSON.stringify(data, null, 2);
            
            // Copy to clipboard
            navigator.clipboard.writeText(jsonString).then(() => {
                alert('Character data copied to clipboard as JSON!\n\nYou can paste this into your markdown file.');
            }).catch(() => {
                // Fallback
                prompt('Copy this character data:', jsonString);
            });
        }

        // Reset character sheet
        function resetSheet() {
            if (confirm('Are you sure you want to reset the character sheet? This will clear all data.')) {
                localStorage.removeItem('dndCharacter');
                location.reload();
            }
        }

        // Add event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved character
            loadCharacter();

            // Ability scores
            ['str', 'dex', 'con', 'int', 'wis', 'cha'].forEach(ability => {
                document.getElementById(ability).addEventListener('input', updateCharacterSheet);
            });

            // Level
            document.getElementById('charLevel').addEventListener('input', updateCharacterSheet);

            // Saving throws
            ['saveStr', 'saveDex', 'saveCon', 'saveInt', 'saveWis', 'saveCha'].forEach(save => {
                document.getElementById(save).addEventListener('change', updateCharacterSheet);
            });

            // Skills
            Object.keys(skillAbilities).forEach(skill => {
                document.getElementById(skill).addEventListener('change', updateCharacterSheet);
            });

            // Character info fields
            ['charName', 'charClass', 'charRace', 'ac', 'speed'].forEach(field => {
                document.getElementById(field).addEventListener('input', saveCharacter);
            });

            // Initial calculation
            updateCharacterSheet();
        });
    </script>
</body>
</html>
